<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>

  <title>QR Hantu Scanner - AR Game</title>

  <!-- A-Frame & AR.js -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
  <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #000;
    }

    /* Loading Screen */
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 18px;
      z-index: 10000;
      text-align: center;
    }

    .loading::after {
      content: '';
      display: block;
      width: 40px;
      height: 40px;
      margin: 20px auto;
      border: 3px solid rgba(255,255,255,0.3);
      border-top: 3px solid #4CAF50;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Loading -->
  <div class="loading" id="loading">Mengaktifkan Kamera...</div>

  <!-- AR Scene -->
  <a-scene
    vr-mode-ui="enabled: false;"
    loading-screen="enabled: false;"
    renderer="logarithmicDepthBuffer: true;"
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
    embedded
    gesture-detector
  >
   <!-- Lighting -->
  <a-entity light="type: ambient; color: #ffffff; intensity: 1.8"></a-entity>
  <a-entity light="type: directional; color: #ffffff; intensity: 1.2" position="0 1 2"></a-entity>

    <!-- Assets -->
    <a-assets>
      <a-asset-item id="animated-asset" src="./Assets/asset.glb"></a-asset-item>
      <a-asset-item id="animated-assetGenderuwo" src="./Assets/assetGenderuwo.glb"></a-asset-item>
      <a-asset-item id="animated-assetGundulpringis" src="./Assets/assetGundulpringis.glb"></a-asset-item>
      <a-asset-item id="animated-assetKuntilanak" src="./Assets/assetKuntilanak.glb"></a-asset-item>
      <a-asset-item id="animated-assetPocong" src="./Assets/assetPocong.glb"></a-asset-item>
      <a-asset-item id="animated-assetTuyul" src="./Assets/assetTuyul.glb"></a-asset-item>
      <a-asset-item id="animated-assetWewegombel" src="./Assets/assetWewegombel.glb"></a-asset-item>
    </a-assets>

    <!-- Marker -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/marker.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
      <a-entity
        scale="0.3 0.3 0.3"
        animation-mixer="loop: repeat"
        gltf-model="#animated-asset"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Marker Genderuwo -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/RevMarkGenderuwo.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
    <a-entity light="type: point; intensity: 1; color: #ffffff" position="0 1 1"></a-entity>
      <a-entity
        scale="0.8 0.8 0.8"
        animation-mixer="loop: repeat"
        gltf-model="#animated-assetGenderuwo"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Marker Gundul -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/RevMarkGundulpringis.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
      <a-entity
        scale="0.1 0.1 0.1"
        animation-mixer="loop: repeat"
        gltf-model="#animated-assetGundulpringis"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Marker Kuntilanak -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/RevMarkKunti.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
      <a-entity
        scale="0.2 0.2 0.2"
        animation-mixer="loop: repeat"
        gltf-model="#animated-assetKuntilanak"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Marker Pocong -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/RevMarkPoci.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
      <a-entity
        scale="0.3 0.3 0.3"
        animation-mixer="loop: repeat"
        gltf-model="#animated-assetPocong"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Marker Tuyul -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/RevMarkTuyul.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
      <a-entity
        scale="0.5 0.5 0.5"
        animation-mixer="loop: repeat"
        gltf-model="#animated-assetTuyul"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Marker Wewe Gombel -->
    <a-marker
      type="pattern"
      preset="custom"
      url="./Assets/RevMarkWewegombel.patt"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;"
    >
    <a-entity light="type: point; intensity: 3; color: #ffffff" position="0 1 1"></a-entity>
      <a-entity
        scale="0.1 0.1 0.1"
        animation-mixer="loop: repeat"
        gltf-model="#animated-assetWewegombel"
        class="clickable"
        gesture-handler
      ></a-entity>
    </a-marker>

    <!-- Camera -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // Hide loading once scene is ready
    document.querySelector('a-scene').addEventListener('loaded', function() {
      document.getElementById('loading').style.display = 'none';
    });
  </script>
</body>
</html>
